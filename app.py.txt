import streamlit as st
import pandas as pd

# ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡πÉ‡∏´‡πâ‡∏û‡∏≠‡∏î‡∏µ‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠
st.set_page_config(page_title="Material Calc", layout="centered")

# ‡∏õ‡∏£‡∏±‡∏ö‡∏™‡∏µ‡∏ò‡∏µ‡∏°‡πÉ‡∏´‡πâ‡∏î‡∏π‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÅ‡∏≠‡∏õ‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ (‡∏™‡πâ‡∏°-‡∏î‡∏≥ ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏ß‡∏¥‡∏®‡∏ß‡∏Å‡∏£‡∏£‡∏°)
st.markdown("""
    <style>
    .stNumberInput input { font-size: 24px !important; height: 60px !important; }
    .stSelectbox div[data-baseweb="select"] { font-size: 18px !important; }
    .result-card {
        background-color: white; padding: 20px; border-radius: 15px;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1); border-left: 8px solid #FF4B4B;
        margin-bottom: 15px;
    }
    </style>
""", unsafe_allow_html=True)

st.title("üèóÔ∏è ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ß‡∏±‡∏™‡∏î‡∏∏‡∏Å‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á")

# ‡πÇ‡∏´‡∏•‡∏î‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î)
try:
    df = pd.read_csv("‡πÄ‡∏ó‡∏™‡∏ï‡∏≤‡∏£‡∏≤‡∏á.xlsx - data ‡∏´‡πâ‡∏≤‡∏°‡∏•‡∏ö ‡∏´‡πâ‡∏≤‡∏°‡∏ó‡∏≥‡∏ä‡∏µ‡∏ó‡∏ô‡∏µ‡πâ.csv")
    
    # ‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏á‡∏≤‡∏ô
    work_list = df.iloc[:, 0].unique()
    selected_work = st.selectbox("‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏á‡∏≤‡∏ô:", work_list)

    # ‡∏ä‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì (‡πÄ‡∏ô‡πâ‡∏ô‡πÉ‡∏´‡πâ‡πÉ‡∏´‡∏ç‡πà ‡∏Å‡∏î‡∏á‡πà‡∏≤‡∏¢‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠)
    quantity = st.number_input("‡∏Å‡∏£‡∏≠‡∏Å‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏á‡∏≤‡∏ô (‡∏´‡∏ô‡πà‡∏ß‡∏¢):", min_value=0.0, step=1.0, value=0.0)

    if quantity > 0:
        st.subheader("üìã ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ß‡∏±‡∏™‡∏î‡∏∏‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ")
        
        # ‡∏î‡∏∂‡∏á‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô
        row = df[df.iloc[:, 0] == selected_work].iloc[0]
        
        # ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
        for col in df.columns[1:]:
            rate = row[col]
            if pd.notna(rate) and rate != 0:
                total = quantity * float(rate)
                st.markdown(f"""
                    <div class="result-card">
                        <div style="color: gray; font-size: 14px;">{col}</div>
                        <div style="font-size: 26px; font-weight: bold; color: #FF4B4B;">{total:,.2f}</div>
                    </div>
                """, unsafe_allow_html=True)

except Exception as e:
    st.error("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• CSV")